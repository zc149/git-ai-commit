# v1.1.0: Initial Release

## 버전 정보
- **버전**: 1.1.0
- **날짜**: 2025-02-05
- **목표**: MVP 기능 구현 및 사용자 피드백 수집

## 개요

AI 기반 커밋 메시지 생성 도구인 `git-ai-commit`의 초기 릴리스입니다. 사용자가 스테이징된 파일의 변경 사항을 분석하여, Conventional Commit 형식의 커밋 메시지를 자동으로 생성할 수 있도록 돕습니다.

## 기능

### 핵심 기능
1. **LLM 기반 커밋 메시지 생성**
   - Groq API를 통한 빠른 응답
   - 3개의 커밋 메시지 후보 제공
   - 사용자 선택 또는 직접 입력 지원

2. **Conventional Commit 형식 지원**
   - type(scope): message 형식
   - 일반적으로 사용되는 타입 지원 (feat, fix, build, docs, test, refactor, chore)

3. **다국어 지원**
   - 한국어
   - 영어

4. **디테일 레벨 조절**
   - low: 최소한의 설명, 한 줄 형식 권장
   - medium: 적절한 디테일 수준
   - high: 자세한 설명, 정형화된 형식

## 기술적 결정

### 1. 언어 선택: Go
**이유**:
- ✅ 빠른 컴파일 속도
- ✅ 단일 바이너리 배포 용이
- ✅ 크로스 플랫폼 지원
- ✅ 풍부한 표준 라이브러리
- ✅ 강력한 정적 타이핑

### 2. LLM 제공자: Groq API
**이유**:
- ✅ 빠른 응답 시간 (LLaMA 모델)
- ✅ 저렴한 비용
- ✅ 고품질의 모델 제공 (Llama 3.2, Mixtral 등)
- ✅ 간단한 API 인터페이스

**사용 모델**: `llama-3.3-70b-versatile`

### 3. 아키텍처 구조

```
git-ai-commit/
├── cmd/
│   └── root.go          # CLI 명령어 정의
├── internal/
│   ├── config/          # 설정 관리
│   ├── core/            # 핵심 로직 (프롬프트 생성)
│   ├── git/             # Git 연동 (diff, commit)
│   ├── llm/             # LLM 제공자 연동
│   ├── model/           # 데이터 모델
│   └── ui/              # 사용자 인터페이스
└── main.go              # 진입점
```

### 4. Git 연동 전략
- `git diff --cached`를 사용하여 스테이징된 변경사항만 분석
- 파일 유형 자동 감지 (source, config, test, doc)
- 확장자 기반 파일 분류

### 5. 프롬프트 설계
**초기 프롬프트 구조**:
```
다음 정보를 기반으로 Conventional Commit 메시지를 생성하세요.

변경 내용 요약:
- file1.ts (source) [새 파일]
  + export function...
- file2.ts (source) [새 파일]
  + export const...

요구사항:
- Conventional Commit 형식 (type(scope): message)
- 3개의 후보 생성
- 번호로 구분 (예: 1) feat(auth): ...)
```

## 구현 상세

### 핵심 컴포넌트

#### 1. `internal/git/diff.go`
**책임**: Git diff 분석 및 파일 정보 추출

**주요 함수**:
- `GetStagedDiff()`: 스테이징된 변경사항 가져오기
- `ParseDiff()`: diff 내용 파싱
- `ClassifyFileType()`: 파일 유형 분류
- `IsNewFile()`: 새 파일 여부 확인
- `IsDeletedFile()`: 삭제된 파일 여부 확인

**파일 유형 분류**:
```go
type FileType int

const (
    FileTypeOther FileType = iota
    FileTypeSource
    FileTypeConfig
    FileTypeTest
    FileTypeDoc
)
```

#### 2. `internal/core/prompt.go`
**책임**: LLM에 전달할 프롬프트 생성

**주요 함수**:
- `GeneratePrompt()`: 전체 프롬프트 생성
- `summarizeChanges()`: diff 변경 내용 요약

#### 3. `internal/core/generator.go`
**책임**: 커밋 메시지 생성 조율

**주요 함수**:
- `GenerateCommitMessages()`: LLM을 통한 커밋 메시지 생성

#### 4. `internal/llm/groq.go`
**책임**: Groq API 연동

**주요 함수**:
- `CallAPI()`: API 요청 전송
- `ParseResponse()`: 응답 파싱

#### 5. `internal/ui/selector.go`
**책임**: 사용자 인터페이스 및 선택 처리

**주요 함수**:
- `DisplayCandidates()`: 후보 메시지 표시
- `SelectCandidate()`: 사용자 선택 처리
- `PromptCustomInput()`: 사용자 직접 입력 처리

## 사용 예시

### 기본 사용
```bash
# 스테이징된 파일 변경사항 분석
git add .

# AI 기반 커밋 메시지 생성
git ai-commit
```

### 디테일 레벨 조절
```bash
# 높은 디테일 수준 (자세한 설명)
git ai-commit -detail high

# 낮은 디테일 수준 (간단한 설명)
git ai-commit -detail low
```

### 언어 선택
```bash
# 한국어
git ai-commit -lang ko

# 영어
git ai-commit -lang en
```

## 제한사항

### 초기 버전의 한계
1. **커밋 타입 추론 부재**
   - LLM에 충분한 컨텍스트 제공 미흡
   - 사용자가 직접 타입 지정 필요

2. **Scope 추천 미흡**
   - 여러 디렉토리 변경 시 적절한 scope 추천 실패
   - 과도한 파일 나열 문제

3. **변경 패턴 분석 부족**
   - 새 기능/버그 수정/리팩토링 등 구분 불가
   - 단순 파일 목록만 전달

## 성능

### 초기 벤치마크
- **응답 시간**: ~2-3초 (Groq API)
- **토큰 사용**: 평균 ~500-1000 토큰
- **정확도**: 사용자 피드백 필요

## 배포

### Homebrew를 통한 설치
```bash
brew install zc149/git-ai-commit/git-ai-commit
```

### 수동 설치
```bash
go build -o git-ai-commit
cp git-ai-commit /usr/local/bin/
```

## 사용자 피드백

### 초기 피드백 수집
1. 커밋 타입 분류 정확도 개선 필요
2. Scope 추천 간결화 필요
3. 더 풍부한 컨텍스트 전달 필요

### 피드백 반영 계획
- v1.2.0: AI 추천 시스템 개선 (커밋 타입/Scope 자동 추론)

## 회고

### 잘한 점
- ✅ 빠르게 MVP 구현
- ✅ 단일 바이너리로 배포 용이
- ✅ Groq API 선택으로 빠른 응답
- ✅ 사용자 피드백 수집 시스템 마련

### 개선할 점
- ⚠️ 커밋 타입 자동 추론 기능 부재
- ⚠️ Scope 추천 로직 개선 필요
- ⚠️ 더 풍부한 컨텍스트 전달 필요
- ⚠️ 엣지 케이스 테스트 부족

### 학습한 점
- 📚 MVP에서 중요한 것은 빠른 출시와 피드백
- 📚 사용자 피드백이 개선 방향을 결정
- 📚 LLM의 성능은 프롬프트 품질에 의존

## 다음 단계

### v1.2.0 계획
- [x] 커밋 타입 자동 추론
- [x] Scope 자동 추론
- [x] 변경 패턴 분석
- [x] 디렉토리 구조 분석
- [x] 프롬프트 강화

### 미래 계획
- [ ] 여러 LLM 제공자 지원 (OpenAI, Anthropic 등)
- [ ] 사용자 정의 규칙 지원
- [ ] 커밋 히스토리 분석
- [ ] 성능 메트릭 대시보드
- [ ] 테스트 커버리지 확대

## 참고

### 관련 문서
- [Conventional Commits](https://www.conventionalcommits.org/)
- [Groq API Documentation](https://console.groq.com/docs/quickstart)
- [Go CLI Best Practices](https://github.com/urfave/cli)

### 기술 스택
- **Language**: Go 1.21+
- **LLM Provider**: Groq (Llama 3.3 70B)
- **CLI Framework**: Cobra
- **Configuration**: Environment variables

### 라이선스
MIT License